---
# Test creating a content view using our data
#

- name: "Create the content view"
  katello_content_view:
    username: "{{ foreman_admin_username }}"
    password: "{{ foreman_admin_password }}"
    server_url: "{{ foreman_server_url }}"
    organization: "{{ foreman_initial_organization }}"
    validate_certs: "{{ foreman_validate_certs }}"
    name: "{{ cv.name }}"
    description: "{{ cv.desc }}"
    repositories: "{{ cv.repositories }}"


# Add the filters
- name: "Add the filters to the Content View"
  include_tasks: create_cv_filter.yml
  loop: "{{ cv.filters }}"
  loop_control:
    loop_var: cvf

