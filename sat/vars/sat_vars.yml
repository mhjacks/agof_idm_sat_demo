
# used for installing the Satellite Server
# See template file in ../roles/satellite/templates/satellite-answers.yml
# used in post installation configuration
foreman_validate_certs: true  # Validate the certs against the foreman server
foreman_server_url: "{{ foreman_foreman_url }}"   #this is set during install 

# What defines a repo is its organization, product, repository set name, architecture and release version
# These are needed to synch. See README.md for more information on determining these values
setup_hammer: "true"

upload_manifest: "true"
manifest_name: "sat66.labbuilder.ca"
manifest_path: "/root/bootstrap_manifest.zip"
manifest_portal_url: "https://subscription.rhsm.redhat.com"
manifest_validate_certs: true # Validate the certs against the CDN
cdn_username: ""
cdn_password: ""
manifest_subs:
  - name: "Base"
    pool_id: "8a85f99c6f0fa8e3016f66c6e10e5f30"
    qty: 50
  - name: "Openshift Infra"
    pool_id: "8a85f99a6f0fa8df016f66c9a78b31e2"
    qty: 10
  - name: "Ansible"
    pool_id: "8a85f9996f0fa058016f66c4d5b441ab"
    qty: 1
  - name: "RHVManager"
    pool_id: "8a85f9996f0fa058016f66c4dbf541be"
    qty: 1
  - name: "SatCapsule"
    pool_id: "8a85f99c6f0fa8e3016f66c6aeb15f2b"
    qty: 2

setup_repositories: "true"
repos_mandatory:

#RHEL7
   - name: "Red Hat Enterprise Linux 7 Server RPMs x86_64 7Server"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: "7Server"

   - name: "Red Hat Enterprise Linux 7 Server - Extras RPMs x86_64"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: ""

   - name: "Red Hat Enterprise Linux 7 Server - RH Common RPMs x86_64 7Server"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: "7Server"

   - name: "Red Hat Enterprise Linux 7 Server - Optional RPMs x86_64 7Server"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: "7Server"

   - name: "Red Hat Enterprise Linux 7 Server - Supplementary RPMs x86_64 7Server"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: "7Server"

   - name: "Red Hat Enterprise Linux 7 Server Kickstart x86_64 7.9"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: "7.9"

   - name: "Red Hat Insights 3 for RHEL 7 Server RPMs x86_64"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: ""

   - name: "Red Hat Ansible Engine 2.9 RPMs for Red Hat Enterprise Linux 7 Server x86_64"
     product: "Red Hat Ansible Engine"
     basearch: "x86_64"
     releasever: ""

   - name: "Red Hat Satellite Tools 6.10 for RHEL 7 Server RPMs x86_64"
     product: "Red Hat Enterprise Linux Server"
     basearch: "x86_64"
     releasever: "7Server"


#RHEL8
   - name: "Red Hat Enterprise Linux 8 for x86_64 - BaseOS RPMs x86_64 8"
     product: "Red Hat Enterprise Linux for x86_64"
     basearch: "x86_64"
     releasever: "8"

   - name: "Red Hat Enterprise Linux 8 for x86_64 - AppStream RPMs x86_64 8"
     product: "Red Hat Enterprise Linux for x86_64"
     basearch: "x86_64"
     releasever: "8"

   - name: "Red Hat Enterprise Linux 8 for x86_64 - Supplementary RPMs x86_64 8"
     product: "Red Hat Enterprise Linux for x86_64"
     basearch: "x86_64"
     releasever: "8"

   - name: "Red Hat Enterprise Linux 8 for x86_64 - BaseOS Kickstart x86_64 8.5"
     product: "Red Hat Enterprise Linux for x86_64"
     basearch: "x86_64"
     releasever: "8.5"

   - name: "Red Hat Enterprise Linux 8 for x86_64 - AppStream Kickstart x86_64 8.5"
     product: "Red Hat Enterprise Linux for x86_64"
     basearch: "x86_64"
     releasever: "8.5"

   - name: "Red Hat Ansible Engine 2.9 for RHEL 8 x86_64 RPMs x86_64"
     product: "Red Hat Ansible Engine"
     basearch: "x86_64"
     releasever: ""

   - name: "Red Hat Satellite Tools 6.6 for RHEL 8 x86_64 RPMs x86_64"
     product: "Red Hat Enterprise Linux for x86_64"
     basearch: "x86_64"
     releasever: "8"


repos_optional:
   - name: "Red Hat Enterprise Linux High Availability for RHEL 7 Server RPMs x86_64 7Server"
     product: "Red Hat Enterprise Linux High Availability for x86_64"
     basearch: "x86_64"
     releasever: "7Server"

   - name: "Red Hat Enterprise Linux Resilient Storage for RHEL 7 Server RPMs x86_64 7Server"
     product: "Red Hat Enterprise Linux Resilient Storage for x86_64"
     basearch: "x86_64"
     releasever: "7Server"

   - name: "Red Hat Enterprise Linux 8 for x86_64 - High Availability RPMs x86_64 8"
     product: "Red Hat Enterprise Linux High Availability for x86_64"
     basearch: "x86_64"
     releasever: "8"

   - name: "Red Hat Enterprise Linux 8 for x86_64 - Resilient Storage RPMs x86_64 8"
     product: "Red Hat Enterprise Linux Resilient Storage for x86_64"
     basearch: "x86_64"
     releasever: "8"

lifecycle_environments:
   - name: "Dev"
     label: "Dev"
     desc: "Our Development Servers - {{ builder_run_tag }}"
     org: "{{ foreman_initial_organization }}"
     prior: "Library"

   - name: "QA"
     label: "QA"
     desc: "Our Quality Assurance Servers - {{ builder_run_tag }}"
     org: "{{ foreman_initial_organization }}"
     prior: "Dev"

   - name: "Prod"
     label: "Prod"
     desc: "Our Production Servers - {{ builder_run_tag }}"
     org: "{{ foreman_initial_organization }}"
     prior: "QA"

   - name: "Retired"
     label: "Retired"
     desc: "Our Retired Servers - {{ builder_run_tag }}"
     org: "{{ foreman_initial_organization }}"
     prior: "Prod"

setup_base_soe_cv: "true"
errata_end_date: "{{ ansible_date_time.date }}"
cvs_mandatory:
  - name: "SOE_RHEL7"
    desc: "Our Red Hat Enterprise Linux 7 Standard Operating Environment Content - {{ builder_run_tag }}"
    org: "{{ foreman_initial_organization }}"
    repositories:
    - name: "Red Hat Ansible Engine 2.9 RPMs for Red Hat Enterprise Linux 7 Server x86_64"
      product: "Red Hat Ansible Engine"
    - name: "Red Hat Satellite Tools 6.10 for RHEL 7 Server RPMs x86_64"
      product: "Red Hat Enterprise Linux Server"
    - name: "Red Hat Enterprise Linux 7 Server - Extras RPMs x86_64"
      product: "Red Hat Enterprise Linux Server"
    - name: "Red Hat Enterprise Linux 7 Server - Optional RPMs x86_64 7Server"
      product: "Red Hat Enterprise Linux Server"
    - name: "Red Hat Enterprise Linux 7 Server - RH Common RPMs x86_64 7Server"
      product: "Red Hat Enterprise Linux Server"
    - name: "Red Hat Enterprise Linux 7 Server RPMs x86_64 7Server"
      product: "Red Hat Enterprise Linux Server"
    - name: "Red Hat Enterprise Linux 7 Server Kickstart x86_64 7.9"
      product: "Red Hat Enterprise Linux Server"
    filters:
    - name: "IncludeAllPackagesNoErrata"
      type: "rpm"
      inclusion: "true"
      description: "Include all packages with no errata for all repositories"
      original_packages: true
      repositories: "[]"
    - name: "IncludeErrataByDate"
      type: "erratum"
      inclusion: "true"
      description: "Include all errata updated as of the 1st of the month"
      repositories: "[]"
      rules:
      - name: "errata-by-date-{{ errata_end_date }}"
        end_date: "{{ errata_end_date }}"
        date_type: "issued"
        types:
        - "enhancement"
        - "bugfix"
        - "security"
    - name: "NoFireFox"
      type: "rpm"
      inclusion: "false"
      description: "Do not provide Firefox to servers"
      original_packages: true
      repositories: "[]"
      rules:
      - name: "firefox*"
        basearch: "x86_64"
    date_filter_name: "IncludeErrataByDate"
    environments:
    - "Dev"
    - "QA"
    - "Prod"
  
  - name: "SOE_RHEL8"
    desc: "Red Hat Enterprise Linux 8 Standard Operating Environment Content"
    org: "{{ foreman_initial_organization }}"
    repositories:
    - name: "Red Hat Ansible Engine 2.9 RPMs for RHEL 8 Server x86_64"
      product: "Red Hat Ansible Engine"
    - name: "Red Hat Enterprise Linux 8 for x86_64 - AppStream RPMs 8"
      product: "Red Hat Enterprise Linux for x86_64"
    - name: "Red Hat Enterprise Linux 8 for x86_64 - BaseOS RPMs 8"
      product: "Red Hat Enterprise Linux for x86_64"
    - name: "Red Hat Enterprise Linux 8 for x86_64 - Supplementary RPMs 8"
      product: "Red Hat Enterprise Linux for x86_64"
    - name: "Red Hat Enterprise Linux 8 for x86_64 - AppStream Kickstart 8.5"
      product: "Red Hat Enterprise Linux for x86_64"
    - name: "Red Hat Enterprise Linux 8 for x86_64 - BaseOS Kickstart 8.5"
      product: "Red Hat Enterprise Linux for x86_64"
    - name: "Red Hat Satellite Tools 6.10 for RHEL 8 x86_64 RPMs"
      product: "Red Hat Enterprise Linux Server"
    filters:
    - name: "IncludeAllPackagesNoErrata"
      type: "rpm"
      inclusion: "true"
      description: "Include all packages with no errata for all repositories"
      original_packages: true
      repositories: "[]"
    - name: "IncludeAllStreamsNoErrata"
      type: "modulemd"
      inclusion: "true"
      description: "Include all packages with no errata for all repositories"
      original_packages: true
      repositories: "[]"
    - name: "IncludeErrataByDate"
      type: "erratum"
      inclusion: "true"
      description: "Include all errata updated as of {{ filter_enddate }}"
      repositories: "[]"
      rules:
      - name: "errata-by-date-{{ filter_enddate }}"
        end_date: "{{ filter_enddate }}"
        date_type: "updated"
        types:
        - "enhancement"
        - "bugfix"
        - "security"
    - name: "ExcludeFireFox"
      type: "rpm"
      inclusion: "false"
      description: "Do not provide Firefox to servers"
      original_packages: true
      repositories: "[]"
      rules:
      - name: "firefox*"
        basearch: "x86_64"
    date_filter_name: "IncludeErrataByDate"
    environments:
    - "Dev"
    - "QA"
    - "Prod"


cvs_optional:
  - name: "MSSQLServer"
    desc: "Microsoft SQL Server for Linux 2019 content - {{ builder_run_tag }}"
    org: "{{ foreman_initial_organization }}"
    repositories:
    - "packages-microsoft-com-mssql-server-2019-7server"
    - "msql-tools-2019-7server"
    filters:
    - name: "IncludePackagesNoErrata"
      type: "rpm"
      inclusion: "true"
      desc: "Include all packages with no errata for all repositories"
      originalpackages: "true"
      repositories: "all"
    - name: "IncludeErrataByDate"
      type: "erratum"
      inclusion: "true"
      desc: "Include all errata updated as of the 1st of the month"
      repositories: "all"
      rules:
      - name: "errata-by-date-{{ errata_end_date }}"
        enddate: "{{ errata_end_date }}"
        datetype: "issued"
        types:
        - "enhancement"
        - "bugfix"
        - "security"
    date_filter_name: "IncludeErrataByDate"
    environments:
    - "Dev"

  - name: "Fedora"
    desc: "Fedora Content - {{ builder_run_tag }}"
    org: "{{ foreman_initial_organization }}"
    repositories:
    - "fedora31"
    - "fedora31-updates"
    filters:
    - name: "IncludePackagesNoErrata"
      type: "rpm"
      inclusion: "true"
      desc: "Include all packages with no errata for all repositories"
      originalpackages: "true"
      repositories: "all"
    - name: "IncludeErrataByDate"
      type: "erratum"
      inclusion: "true"
      desc: "Include all errata updated as of the 1st of the month"
      repositories: "all"
      rules:
      - name: "errata-by-date-{{ errata_end_date }}"
        enddate: "{{ errata_end_date }}"
        datetype: "issued"
        types:
        - "enhancement"
        - "bugfix"
        - "security"
    date_filter_name: "IncludeErrataByDate"
    environments:
    - "Dev"


ccvs_mandatory:
# place mandatory composite content rules here

ccvs_optional:
  - name: "SOE_MSSQL"
    desc: "Our Current MSSQL on Linux Standard Operating Environment Content - {{ builder_run_tag }}"
    org: "{{ foreman_initial_organization }}"
    components:
    - "SOE_RHEL"
    - "MSSQLServer"

setup_sync_plans: "true"
sync_plans_mandatory:
  - name: nightly_os
    desc: "Nightly OS repo sync - 00:30 - {{ builder_run_tag }}"
    interval: "daily"
    sync_date: "{{ ansible_date_time.date }} 00:30:00"
    enabled: true
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: nightly_infra
    desc: "Nightly non-OS repo sync - 02:30 {{ builder_run_tag }}"
    interval: "daily"
    sync_date: "{{ ansible_date_time.date }} 02:30:00"
    enabled: "true"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: nightly_third_party
    desc: "Nightly non-OS repo sync - 03:30 {{ builder_run_tag }}"
    interval: "daily"
    sync_date: "{{ ansible_date_time.date }} 03:30:00"
    enabled: "true"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"


setup_products: true
custom_products:
  - name: "Fedora"
    desc: "Fedora from Red Hat"
    org: "{{ foreman_initial_organization }}"
    label: fedora
    repository_name:
    - name: fedora31
      upstream_name: fedora
      repository_content_type: yum
      url: "https://mirror.csclub.uwaterloo.ca/fedora/linux/releases/31/Everything/x86_64/os/"
      username: ""
      password: ""
    - name: fedora31_updates
      upstream_name: fedora_updates
      repository_content_type: yum
      url: "https://mirror.csclub.uwaterloo.ca/fedora/linux/updates/31/Everything/x86_64/"
      username: ""
      password: ""
  - name: "Red Hat SCAP OVAL Files"
    desc: "SCAP Content for Red Hat Products managed by Red Hat"
    org: "{{ foreman_initial_organization }}"
    label: rh_scap_content
    repository_name:
    - name: RedHatSCAPContent
      upstream_name: ""
      repository_content_type: file
      url: "https://redhat.com/security/data/oval/"
      username: ""
      password: ""
  - name: "Microsoft SQL Server for Linux 2019"
    desc: "Microsoft SQL Server for Linux 2019 installation and tools"
    org: "{{ foreman_initial_organization }}"
    label: mmsqlserver_2019
    repository_name:
    - name: packages-microsoft-com-mssql-server-2019-7server
      upstream_name: ""
      repository_content_type: yum
      url: "https://packages.microsoft.com/rhel/7/mssql-server-2019/"
      username: ""
      password: ""
    - name: msql-tools-2019-7server
      upstream_name: ""
      repository_content_type: yum
      url: "https://packages.microsoft.com/rhel/7/prod/"
      username: ""
      password: ""


setup_attach_plan_to_product: "true"
product_plan:
  - name: "Red Hat Ansible Engine"          
    plan: "nightly_infra"
    organization: "{{ foreman_initial_organization }}"
  - name: "Red Hat Enterprise Linux Server"
    plan: "nightly_os"
    organization: "{{ foreman_initial_organization }}"
  - name: "Red Hat Gluster Storage Server for On-premise"
    plan: "nightly_infra"
    organization: "{{ foreman_initial_organization }}"
  - name: "Red Hat OpenShift Container Platform"
    plan: "nightly_infra"
    organization: "{{ foreman_initial_organization }}"
  - name: "Red Hat Virtualization"
    plan: "nightly_infra"
    organization: "{{ foreman_initial_organization }}"
  - name: "Red Hat Virtualization Manager"
    plan: "nightly_infra"
    organization: "{{ foreman_initial_organization }}"
  - name: "Fedora"
    plan: "nightly_third_party"
    organization: "{{ foreman_initial_organization }}"
  - name: "Microsoft SQL Server for Linux"
    plan: "nightly_third_party"
    organization: "{{ foreman_initial_organization }}"
  
setup_general_settings: "false"

setup_organizations: "false"
# Parameters?

setup_locations: "false"
# Paramters? Yes!

setup_users: "false"
setup_groups: "false"
setup_roles: "false"

# PUT YOUR MANDATORY MEDIA DEFINITIONS IN HERE - stuff required for your initial builders 
# OR BEST PRACTICE IS ADD YOUR OWN FOREMAN_POST to your builder.
# DO NOT REMOVE RHEL OR RHVH
setup_mandatory_media: "true"
media_mandatory:
  - name: RHEL7Server
    os_family: Redhat
    path: "http://{{ ansible_fqdn }}/pulp/repos/{{ foreman_initial_organization | replace(' ', '_') }}/Library/content/dist/rhel/server/7/$major.$minor/$arch/kickstart/"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: RHVH
    os_family: Redhat
    path: "https://{{ ansible_fqdn }}/pub/rhvh"
    create_path: true
    fetch_content: true
    content_play: "{{ role_path }}/RHVH_content.yml"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"


# PUT YOUR MEDIA DEFINITIONS IN OPTIONAL MEDIA
setup_optional_media: "true"
media_optional:
  - name: Fedora31 
    os_family: Redhat
    path: "http://{{ ansible_fqdn }}/pulp/repos/{{ foreman_initial_organization | replace(' ', '_') }}/Library/custom/Fedora/Fedora31/"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
 

# Place your partition table templates in the foreman_post templates directory

setup_ptables: "true"
ptables_mandatory:
  - name: "rhel_soe"
    os_family: "Redhat"
    path: "ptable_rhel_soe.j2"
    audit_comment: "Lab Builder Base RHEL SOE Partition Table - {{ builder_run_tag }}"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "cpgpc"
    os_family: "Redhat"
    path: "ptable_cpgpc.j2"
    audit_comment: "Lab Builder Common Profile for General Purpose Computing Partition Table - {{ builder_run_tag }}"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "ocp_soe"
    os_family: "Redhat"
    path: "ptable_ocp.j2"
    audit_comment: "Lab Builder OpenShift Container Platform SOE Partition Table - {{ builder_run_tag }}"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "ocp_soe_encrypted"
    os_family: "Redhat"
    path: "ptable_ocp_encrypted.j2" 
    audit_comment: "Lab Builder OpenShift Container Platform SOE Partition Table - {{ builder_run_tag }}"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "rhvh_43"
    os_family: "Redhat"
    path: "ptable_rhvh_43.j2"
    audit_comment: "Lab Builder OpenShift Container Platform SOE Partition Table - {{ builder_run_tag }}"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"


setup_prov_templates: "true"
# hammer template kinds
# ---------
# NAME     
# ---------
# Bootdisk # PXELinux # PXEGrub  # PXEGrub2 # iPXE  # provision
# finish   # script   # user_data# ZTP      # POAP  # kexec    
# snippet  

# Place your provisioning templates in the foreman_post templates directory

prov_templates_mandatory:
#provision
  - name: "lab_kickstart_default"
    type: "provision"
    locked: false
    audit_comment: "Lab Builder Kickstart Default - {{ builder_run_tag }}"
    path: "prov_template_lab_kickstart_default.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_rhvh"
    type: "provision"
    locked: false
    audit_comment: "Lab Builder Kickstart RHVH - {{ builder_run_tag }}"
    path: "prov_template_lab_rhvh.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"

#pxelinux
  - name: "lab_rhvh_pxelinux"
    type: "PXELinux"
    locked: false
    audit_comment: "Lab Builder PXE RHVH PXELinux - {{ builder_run_tag }}"
    path: "prov_template_pxe_lab_rhvh_pxelinux.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"

#snippet
  - name: "lab_ansible_provisioning_callback"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Anisble Callback Snippet - {{ builder_run_tag }}"
    path: "prov_template_snippet_rhc_ansible_provisioning_callback.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_epel"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder EPEL Snippet - {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_epel.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_freeipa_register"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Snippet for FreeIPA/IdM registration - {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_freeipa_register.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_kickstart_networking_setup"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Snippet kickstart networking setup - {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_kickstart_networking_setup.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_redhat_register"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Snippet subscription-manager registration - {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_redhat_register.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_remote_execution_ssh_keys"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Snippet for remote execution setup - {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_remote_execution_ssh_keys.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_rhv_specific"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Snippet for RHV clients- {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_rhv_specific.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
  - name: "lab_vmware_specific"
    type: "snippet"
    locked: false
    audit_comment: "Lab Builder Snippet for VMware clients- {{ builder_run_tag }}"
    path: "prov_template_snippet_lab_vmware_specific.j2"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"

setup_oss: "true"
oss_special:
  - name: "RedHat"
    title: "RHEL Server 7.7"
    major: 7
    minor: 7
    description: "Red Hat Base OS created by synchronization - {{ builder_run_tag }}"
    family: "Redhat"
    password_hash: "SHA256"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
    architectures:
      - "x86_64"
    config_templates:
      - "Kickstart default PXELinux"
      - "Kickstart default PXEGrub"
      - "Kickstart default PXEGrub2"
      - "Kickstart default iPXE"
      - "lab_kickstart_default"
      - "Kickstart default finish"
      - "Kickstart default user data"
    media:
      - "RHEL7Server"
    ptables:
      - "Kickstart default"
      - "rhel_soe"
      - "cpgpc"
      - "ocp_soe"

oss_mandatory:
  - name: "RHVH"
    major: 4
    minor: 3
    description: "Red Hat Virtualization Hypervisor - {{ builder_run_tag }}"
    family: "Redhat"
    password_hash: "SHA256"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
    architectures:
      - "x86_64"
    config_templates:
      - "lab_rhvh_kickstart"
      - "lab_rhvh_pxelinux"
      - "Kickstart default finish"
      - "Kickstart default user data"
    media:
      - "RHVH"
    ptables:
      - "rhvh_43"

#  - {{ builder_run_tag }}
# We need to ensure that we have all the required configuration
# for a host group
# Currently, we are examining only one datacentre in this sample
# Larger configurations with multiple DCs can be defined
# you can configure optional domains, realms, etc.. for remotes
# if you are concerned once happy, simply remove the _optional
# tag or place it above only those that are truly optional
# (demos, toys, skunkworks, 8-)  )

# ActivationKeys
# Again, mandatory (to meet base config), optional (to add to the config - also failing will not stop build till the end of the phase)
# you can have unlimited hosts defined or max_hosts defined, not both or boom
setup_activation_keys: true
aks_mandatory:
  - name: "RHEL_SOE"
    organization: "{{ foreman_initial_organization }}"
    unlimited_hosts: true
    auto_attach: true

  - name: "RHVH"
    organization: "{{ foreman_initial_organization }}"
    unlimited_hosts: true
    auto_attach: true

setup_domains: "true"
domains_mandatory:
  - name: "{{ ansible_domain }}"
    description: "root domain for the installation"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"

setup_realms: "true"
realms_mandatory:
  - name: "{{ ansible_domain | upper }}"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
    realm_type: "Red Hat Identity Management"
    capsule: "{{ ansible_fqdn }}"

setup_subnets: "true"
subnets_mandatory:
  - name: "Public"
    boot_mode: "Static"
    description: "Front side for client apps  - {{ builder_run_tag }}"
    network: 192.168.248.0
    prefix: 22
    mask: 255.255.252.0
    network_type: "IPv4"
    gateway: 192.168.248.1
    dns_primary: 192.168.248.10
    dns_secondary: 192.168.248.11
    ipam: "Internal DB"
    from: 192.168.249.1
    to: 192.168.249.254
    discovery_capsule: "{{ ansible_fqdn }}"
    tftp_capsule: "{{ ansible_fqdn }}"
#    dns_capsule: "{{ ansible_fqdn }}"
#    template_capsule: "{{ ansible_fqdn }}"
#    dhcp_capsule: "{{ ansible_fqdn }}"
    domains: 
      - "{{ ansible_domain }}"
    locations:
      - "{{ foreman_initial_location }}"
    organizations: 
      - "{{ foreman_initial_organization }}"

  - name: "ProvMgtMig"
    boot_mode: "Static"
    description: "Provisioning, Migration and Management - {{ builder_run_tag }}"
    network: 192.168.148.0
    prefix: 22
    mask: 255.255.252.0
    network_type: "IPv4"
    gateway: 192.168.148.1
    ipam: "Internal DB"
    from: 192.168.149.1
    to: 192.168.149.254
    discovery_capsule: "{{ ansible_fqdn }}"
    tftp_capsule: "{{ ansible_fqdn }}"
    locations: 
      - "{{ foreman_initial_location }}"
    organizations: 
      - "{{ foreman_initial_organization }}"

  - name: "Storage"
    boot_mode: "Static"
    description: "Storage Network for Gluster and iSCSI  - {{ builder_run_tag }}"
    network: 192.168.48.0
    prefix: 22
    mask: 255.255.252.0
    network_type: "IPv4"
    gateway: 192.168.48.1
    ipam: "Internal DB"
    from: 192.168.49.1
    to: 192.168.49.254
    locations: 
      - "{{ foreman_initial_location }}"
    organizations: 
      - "{{ foreman_initial_organization }}"


#TODO: set up Ansible Roles in foreman
# then we can add them to the hostgroup

setup_hostgroups: "true"
hostgroups_baremetal:
  - name: "BaseBareMetal"
    arch: "x86_64"
    ask_root_password: false
    content_view: "SOE_RHEL"
    description: "Use to deploy basic bare metal RHEL systems e.g. IdM Servers, etc.."
    content_source: "{{ ansible_fqdn }}"
    domain: "{{ ansible_domain }}"
    lifecycle_environment: "Library"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
    os_title: "RHEL Server 7.7"
    medium: "RHEL7Server"
    pxe_loader: "PXELinux BIOS"
    realm: "{{ ansible_domain | upper }}"
    subnet: "Public"
    root_pass: "{{ sat_admin }}"
  - name: "RHVH"
    arch: "x86_64"
    ask_root_password: false
    content_view: "RHVH" 
    description: "Use to deploy RHEV hypervisors"
    domain: "{{ ansible_domain }}"
    lifecycle_environment: "Library"
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"
    os_title: "RHVH"
    medium: "RHVH" 
    pxe_loader: "PXELinux BIOS"
    realm: "{{ ansible_domain | upper }}"
    subnet: "Public"
    root_pass: "{{ sat_admin }}"
    parameters:
      - name: "rhvh_image"
        value: "http://{{ ansible_fqdn }}/pub/rhvh/"


#TODO: setup SCAP profiles... this can wait till a later phase
        
setup_discovery: "true"
discovery_rules:
  - name: rhvh_node
    organization: "{{ foreman_initial_organization }}"
    location: "{{ foreman_initial_location }}"

setup_infrastructure: "false"
# Infrastructure Setup will now follow the RHHI Ansible Deployment
# Our goal here is to configure the pre-requisites for the deployment
# using Satellite, Ansible, and IdM and the automate the configuration
# of the deployment variables and launch the deployment
# After deployment, we will automate the verification of the deployment
# and then we will configure the cluster as a compute resource below

setup_virtwho: "false"

# This can be fleshed out after we create the bootable image
# This will get updated on launch after bootstrapping the first server
# The startup service will call git pull to update the local repository
# Compute resources can only be built after the hypervisors are deployed.

setup_compute_resources: "false"
comp_res_mandatory:
  - name: "RHV"
    type: "rhv"
    controller_hostname: "your_rhvm_server_here"
    controller_username: "service_admin_name"
    controller_password: "service_password"   #Provide this as a variable in a private file
    virtwho_username: "readonly_admin_name"
    virtwho_password: "virtwho_password"    #Provide this as a variable in a private file - will be encrypted.

comp_res_optional:
  - name: "VMware"
    type: "esx"
    controller_hostname: "your_vcentre_server_here"
    controller_username: "service_admin_name"
    controller_password: "service_password"   #Provide this as a variable in a private file - will be encryped.
    virtwho_username: "readonly_admin_name"
    virtwho_password: "virtwho_password"    #Provide this as a variable in a private file - will be encrypted.

setup_oscap: "false"

